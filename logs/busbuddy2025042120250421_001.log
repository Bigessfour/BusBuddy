2025-04-21 14:42:32.812 -06:00 [INF] Starting BusBuddy application
2025-04-21 14:42:33.211 -06:00 [INF] Welcome form initialized
2025-04-21 14:42:33.213 -06:00 [INF] Auto refresh timer started with interval 300000ms
2025-04-21 14:42:33.378 -06:00 [INF] Loaded layout settings for Welcome
2025-04-21 14:42:33.379 -06:00 [INF] Loading today's trips data
2025-04-21 14:42:33.493 -06:00 [INF] No scheduled trips found for today
2025-04-21 14:42:33.499 -06:00 [INF] Loading today's trips data
2025-04-21 14:42:33.504 -06:00 [INF] No scheduled trips found for today
2025-04-21 14:42:35.619 -06:00 [INF] Vehicles button clicked
2025-04-21 14:42:35.619 -06:00 [INF] Navigating to Vehicle Management
2025-04-21 14:42:35.626 -06:00 [INF] Current database schema version: 0
2025-04-21 14:42:35.626 -06:00 [WRN] Migrations directory not found at C:\Users\steve.mckitrick\Desktop\BusBuddy\bin\Debug\net9.0-windows\Migrations. Skipping migration check.
2025-04-21 14:42:35.639 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 14:42:35.645 -06:00 [ERR] Required column PlateNumber is missing in table Vehicles.
2025-04-21 14:42:35.645 -06:00 [ERR] Vehicles table schema is invalid. Returning empty list.
2025-04-21 14:42:35.650 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 14:42:35.651 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 14:42:35.761 -06:00 [INF] Loaded layout settings for VehiclesForm
2025-04-21 14:42:46.206 -06:00 [WRN] Attempt 1 failed for add vehicle: SQL logic error
table Vehicles has no column named PlateNumber. Retrying...
2025-04-21 14:42:47.271 -06:00 [WRN] Attempt 2 failed for add vehicle: SQL logic error
table Vehicles has no column named PlateNumber. Retrying...
2025-04-21 14:42:49.333 -06:00 [WRN] Attempt 3 failed for add vehicle: SQL logic error
table Vehicles has no column named PlateNumber. Retrying...
2025-04-21 14:42:52.395 -06:00 [ERR] Failed to add vehicle after 3 attempts.
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
table Vehicles has no column named PlateNumber
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass9_0.<AddVehicle>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 272
   at BusBuddy.Data.DatabaseManager.ExecuteWithRetry[T](Func`2 operation, String operationName) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 999
2025-04-21 14:42:52.554 -06:00 [ERR] Error adding vehicle: One or more errors occurred. (Failed to add vehicle)
System.AggregateException: One or more errors occurred. (Failed to add vehicle)
 ---> System.InvalidOperationException: Failed to add vehicle
 ---> code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
table Vehicles has no column named PlateNumber
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass9_0.<AddVehicle>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 272
   at BusBuddy.Data.DatabaseManager.ExecuteWithRetry[T](Func`2 operation, String operationName) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 999
   --- End of inner exception stack trace ---
   at BusBuddy.Data.DatabaseManager.ExecuteWithRetry[T](Func`2 operation, String operationName) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 1011
   at BusBuddy.Data.DatabaseManager.AddVehicle(Vehicle vehicle) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 268
   at BusBuddy.UI.Forms.VehiclesForm.<>c__DisplayClass9_0.<SaveRecord>b__1() in C:\Users\steve.mckitrick\Desktop\BusBuddy\UI\Forms\VehiclesForm.cs:line 150
   at System.Threading.Tasks.Task`1.InnerInvoke()
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at BusBuddy.UI.Forms.VehiclesForm.SaveRecord() in C:\Users\steve.mckitrick\Desktop\BusBuddy\UI\Forms\VehiclesForm.cs:line 150
2025-04-21 14:42:59.021 -06:00 [INF] Saved layout settings for VehiclesForm
2025-04-21 14:43:01.135 -06:00 [INF] Saved layout settings for Welcome
2025-04-21 14:48:09.246 -06:00 [INF] Starting BusBuddy application
2025-04-21 14:48:09.723 -06:00 [INF] Welcome form initialized
2025-04-21 14:48:09.724 -06:00 [INF] Auto refresh timer started with interval 300000ms
2025-04-21 14:48:09.872 -06:00 [INF] Loaded layout settings for Welcome
2025-04-21 14:48:09.873 -06:00 [INF] Loading today's trips data
2025-04-21 14:48:09.987 -06:00 [INF] No scheduled trips found for today
2025-04-21 14:48:09.993 -06:00 [INF] Loading today's trips data
2025-04-21 14:48:09.998 -06:00 [INF] No scheduled trips found for today
2025-04-21 14:48:11.789 -06:00 [INF] Vehicles button clicked
2025-04-21 14:48:11.789 -06:00 [INF] Navigating to Vehicle Management
2025-04-21 14:48:11.792 -06:00 [INF] Applying initialization script from C:\Users\steve.mckitrick\Desktop\BusBuddy\bin\Debug\net9.0-windows\init-db.sql...
2025-04-21 14:48:11.795 -06:00 [INF] Vehicles table already exists. Checking schema...
2025-04-21 14:48:11.892 -06:00 [WRN] Minor error running init script on existing DB (might be expected).
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
table Routes has no column named RouteName
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass6_0.<InitializeDatabase>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 69
2025-04-21 14:48:11.893 -06:00 [INF] Database schema initialization/verification complete.
2025-04-21 14:48:11.907 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 14:48:11.913 -06:00 [ERR] Required column PlateNumber is missing in table Vehicles.
2025-04-21 14:48:11.913 -06:00 [ERR] Vehicles table schema is invalid. Returning empty list.
2025-04-21 14:48:11.918 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 14:48:11.919 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 14:48:12.026 -06:00 [INF] Loaded layout settings for VehiclesForm
2025-04-21 14:48:34.826 -06:00 [WRN] Attempt 1 failed for add vehicle: SQL logic error
table Vehicles has no column named PlateNumber. Retrying...
2025-04-21 14:48:35.890 -06:00 [WRN] Attempt 2 failed for add vehicle: SQL logic error
table Vehicles has no column named PlateNumber. Retrying...
2025-04-21 14:48:37.950 -06:00 [WRN] Attempt 3 failed for add vehicle: SQL logic error
table Vehicles has no column named PlateNumber. Retrying...
2025-04-21 14:48:41.015 -06:00 [ERR] Failed to add vehicle after 3 attempts.
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
table Vehicles has no column named PlateNumber
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass12_0.<AddVehicle>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 333
   at BusBuddy.Data.DatabaseManager.ExecuteWithRetry[T](Func`2 operation, String operationName) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 1060
2025-04-21 14:48:41.119 -06:00 [ERR] Error adding vehicle: One or more errors occurred. (Failed to add vehicle)
System.AggregateException: One or more errors occurred. (Failed to add vehicle)
 ---> System.InvalidOperationException: Failed to add vehicle
 ---> code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
table Vehicles has no column named PlateNumber
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass12_0.<AddVehicle>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 333
   at BusBuddy.Data.DatabaseManager.ExecuteWithRetry[T](Func`2 operation, String operationName) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 1060
   --- End of inner exception stack trace ---
   at BusBuddy.Data.DatabaseManager.ExecuteWithRetry[T](Func`2 operation, String operationName) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 1072
   at BusBuddy.Data.DatabaseManager.AddVehicle(Vehicle vehicle) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 329
   at BusBuddy.UI.Forms.VehiclesForm.<>c__DisplayClass9_0.<SaveRecord>b__1() in C:\Users\steve.mckitrick\Desktop\BusBuddy\UI\Forms\VehiclesForm.cs:line 150
   at System.Threading.Tasks.Task`1.InnerInvoke()
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at BusBuddy.UI.Forms.VehiclesForm.SaveRecord() in C:\Users\steve.mckitrick\Desktop\BusBuddy\UI\Forms\VehiclesForm.cs:line 150
2025-04-21 14:48:44.326 -06:00 [INF] Saved layout settings for VehiclesForm
2025-04-21 14:48:45.829 -06:00 [INF] Saved layout settings for Welcome
2025-04-21 15:44:05.139 -06:00 [INF] Starting BusBuddy application
2025-04-21 15:44:05.671 -06:00 [INF] Welcome form initialized
2025-04-21 15:44:05.672 -06:00 [INF] Auto refresh timer started with interval 300000ms
2025-04-21 15:44:05.820 -06:00 [INF] Loaded layout settings for Welcome
2025-04-21 15:44:05.821 -06:00 [INF] Loading today's trips data
2025-04-21 15:44:05.932 -06:00 [INF] No scheduled trips found for today
2025-04-21 15:44:05.939 -06:00 [INF] Loading today's trips data
2025-04-21 15:44:05.944 -06:00 [INF] No scheduled trips found for today
2025-04-21 15:44:07.497 -06:00 [INF] Vehicles button clicked
2025-04-21 15:44:07.497 -06:00 [INF] Navigating to Vehicle Management
2025-04-21 15:44:07.500 -06:00 [INF] Applying initialization script from C:\Users\steve.mckitrick\Desktop\BusBuddy\bin\Debug\net9.0-windows\init-db.sql...
2025-04-21 15:44:07.505 -06:00 [INF] Vehicles table already exists. Checking schema...
2025-04-21 15:44:07.604 -06:00 [WRN] Minor error running init script on existing DB (might be expected).
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
table Routes has no column named RouteName
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass6_0.<InitializeDatabase>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 69
2025-04-21 15:44:07.605 -06:00 [INF] Database schema initialization/verification complete.
2025-04-21 15:44:07.618 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 15:44:07.624 -06:00 [ERR] Required column PlateNumber is missing in table Vehicles.
2025-04-21 15:44:07.624 -06:00 [ERR] Vehicles table schema is invalid. Returning empty list.
2025-04-21 15:44:07.628 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 15:44:07.629 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 15:44:07.735 -06:00 [INF] Loaded layout settings for VehiclesForm
2025-04-21 15:44:20.776 -06:00 [WRN] Attempt 1 failed for add vehicle: SQL logic error
table Vehicles has no column named PlateNumber. Retrying...
2025-04-21 15:44:21.839 -06:00 [WRN] Attempt 2 failed for add vehicle: SQL logic error
table Vehicles has no column named PlateNumber. Retrying...
2025-04-21 15:44:23.899 -06:00 [WRN] Attempt 3 failed for add vehicle: SQL logic error
table Vehicles has no column named PlateNumber. Retrying...
2025-04-21 15:44:26.962 -06:00 [ERR] Failed to add vehicle after 3 attempts.
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
table Vehicles has no column named PlateNumber
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass12_0.<AddVehicle>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 333
   at BusBuddy.Data.DatabaseManager.ExecuteWithRetry[T](Func`2 operation, String operationName) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 1060
2025-04-21 15:44:27.071 -06:00 [ERR] Error adding vehicle: One or more errors occurred. (Failed to add vehicle)
System.AggregateException: One or more errors occurred. (Failed to add vehicle)
 ---> System.InvalidOperationException: Failed to add vehicle
 ---> code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
table Vehicles has no column named PlateNumber
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass12_0.<AddVehicle>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 333
   at BusBuddy.Data.DatabaseManager.ExecuteWithRetry[T](Func`2 operation, String operationName) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 1060
   --- End of inner exception stack trace ---
   at BusBuddy.Data.DatabaseManager.ExecuteWithRetry[T](Func`2 operation, String operationName) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 1072
   at BusBuddy.Data.DatabaseManager.AddVehicle(Vehicle vehicle) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 329
   at BusBuddy.UI.Forms.VehiclesForm.<>c__DisplayClass9_0.<SaveRecord>b__1() in C:\Users\steve.mckitrick\Desktop\BusBuddy\UI\Forms\VehiclesForm.cs:line 150
   at System.Threading.Tasks.Task`1.InnerInvoke()
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at BusBuddy.UI.Forms.VehiclesForm.SaveRecord() in C:\Users\steve.mckitrick\Desktop\BusBuddy\UI\Forms\VehiclesForm.cs:line 150
2025-04-21 15:44:31.273 -06:00 [INF] Welcome form initialized
2025-04-21 15:44:31.274 -06:00 [INF] Auto refresh timer started with interval 300000ms
2025-04-21 15:44:31.309 -06:00 [INF] Loaded layout settings for Welcome
2025-04-21 15:44:31.309 -06:00 [INF] Loading today's trips data
2025-04-21 15:44:31.315 -06:00 [INF] No scheduled trips found for today
2025-04-21 15:44:31.318 -06:00 [INF] Loading today's trips data
2025-04-21 15:44:31.323 -06:00 [INF] No scheduled trips found for today
2025-04-21 15:44:36.337 -06:00 [INF] Saved layout settings for Welcome
2025-04-21 15:44:36.348 -06:00 [INF] Saved layout settings for VehiclesForm
2025-04-21 15:44:37.570 -06:00 [INF] Saved layout settings for Welcome
2025-04-21 15:46:46.282 -06:00 [INF] Starting BusBuddy application
2025-04-21 15:46:46.655 -06:00 [INF] Welcome form initialized
2025-04-21 15:46:46.657 -06:00 [INF] Auto refresh timer started with interval 300000ms
2025-04-21 15:46:46.795 -06:00 [INF] Loaded layout settings for Welcome
2025-04-21 15:46:46.796 -06:00 [INF] Loading today's trips data
2025-04-21 15:46:46.902 -06:00 [INF] No scheduled trips found for today
2025-04-21 15:46:46.908 -06:00 [INF] Loading today's trips data
2025-04-21 15:46:46.913 -06:00 [INF] No scheduled trips found for today
2025-04-21 15:46:47.875 -06:00 [INF] Vehicles button clicked
2025-04-21 15:46:47.875 -06:00 [INF] Navigating to Vehicle Management
2025-04-21 15:46:47.877 -06:00 [INF] Applying initialization script from C:\Users\steve.mckitrick\Desktop\BusBuddy\bin\Debug\net9.0-windows\init-db.sql...
2025-04-21 15:46:47.882 -06:00 [INF] Vehicles table already exists. Checking schema...
2025-04-21 15:46:48.002 -06:00 [WRN] Minor error running init script on existing DB (might be expected).
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
duplicate column name: PlateNumber
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass6_0.<InitializeDatabase>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 69
2025-04-21 15:46:48.047 -06:00 [INF] Database schema initialization/verification complete.
2025-04-21 15:46:48.066 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 15:46:48.075 -06:00 [ERR] Required column PurchaseDate is missing in table Vehicles.
2025-04-21 15:46:48.075 -06:00 [ERR] Vehicles table schema is invalid. Returning empty list.
2025-04-21 15:46:48.082 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 15:46:48.084 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 15:46:48.198 -06:00 [INF] Loaded layout settings for VehiclesForm
2025-04-21 15:46:51.341 -06:00 [WRN] Attempt 1 failed for add vehicle: SQL logic error
table Vehicles has no column named PurchaseDate. Retrying...
2025-04-21 15:46:52.402 -06:00 [WRN] Attempt 2 failed for add vehicle: SQL logic error
table Vehicles has no column named PurchaseDate. Retrying...
2025-04-21 15:46:54.458 -06:00 [WRN] Attempt 3 failed for add vehicle: SQL logic error
table Vehicles has no column named PurchaseDate. Retrying...
2025-04-21 15:46:57.523 -06:00 [ERR] Failed to add vehicle after 3 attempts.
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
table Vehicles has no column named PurchaseDate
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass12_0.<AddVehicle>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 333
   at BusBuddy.Data.DatabaseManager.ExecuteWithRetry[T](Func`2 operation, String operationName) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 1060
2025-04-21 15:46:57.623 -06:00 [ERR] Error adding vehicle: One or more errors occurred. (Failed to add vehicle)
System.AggregateException: One or more errors occurred. (Failed to add vehicle)
 ---> System.InvalidOperationException: Failed to add vehicle
 ---> code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
table Vehicles has no column named PurchaseDate
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass12_0.<AddVehicle>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 333
   at BusBuddy.Data.DatabaseManager.ExecuteWithRetry[T](Func`2 operation, String operationName) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 1060
   --- End of inner exception stack trace ---
   at BusBuddy.Data.DatabaseManager.ExecuteWithRetry[T](Func`2 operation, String operationName) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 1072
   at BusBuddy.Data.DatabaseManager.AddVehicle(Vehicle vehicle) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 329
   at BusBuddy.UI.Forms.VehiclesForm.<>c__DisplayClass9_0.<SaveRecord>b__1() in C:\Users\steve.mckitrick\Desktop\BusBuddy\UI\Forms\VehiclesForm.cs:line 150
   at System.Threading.Tasks.Task`1.InnerInvoke()
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at BusBuddy.UI.Forms.VehiclesForm.SaveRecord() in C:\Users\steve.mckitrick\Desktop\BusBuddy\UI\Forms\VehiclesForm.cs:line 150
2025-04-21 15:51:46.499 -06:00 [INF] Loading today's trips data
2025-04-21 15:51:46.506 -06:00 [INF] No scheduled trips found for today
2025-04-21 18:47:01.751 -06:00 [INF] Starting BusBuddy application
2025-04-21 18:47:02.256 -06:00 [INF] Welcome form initialized
2025-04-21 18:47:02.257 -06:00 [INF] Auto refresh timer started with interval 300000ms
2025-04-21 18:47:02.424 -06:00 [INF] Loaded layout settings for Welcome
2025-04-21 18:47:02.424 -06:00 [INF] Loading today's trips data
2025-04-21 18:47:02.538 -06:00 [INF] No scheduled trips found for today
2025-04-21 18:47:02.544 -06:00 [INF] Loading today's trips data
2025-04-21 18:47:02.549 -06:00 [INF] No scheduled trips found for today
2025-04-21 18:47:05.125 -06:00 [INF] Vehicles button clicked
2025-04-21 18:47:05.125 -06:00 [INF] Navigating to Vehicle Management
2025-04-21 18:47:05.127 -06:00 [INF] Applying initialization script from C:\Users\steve.mckitrick\Desktop\BusBuddy\bin\Debug\net9.0-windows\init-db.sql...
2025-04-21 18:47:05.132 -06:00 [INF] Vehicles table already exists. Checking schema...
2025-04-21 18:47:05.231 -06:00 [WRN] Minor error running init script on existing DB (might be expected).
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
duplicate column name: PlateNumber
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass6_0.<InitializeDatabase>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 69
2025-04-21 18:47:05.232 -06:00 [INF] Database schema initialization/verification complete.
2025-04-21 18:47:05.249 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:47:05.255 -06:00 [ERR] Required column PurchaseDate is missing in table Vehicles.
2025-04-21 18:47:05.255 -06:00 [ERR] Vehicles table schema is invalid. Returning empty list.
2025-04-21 18:47:05.261 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:47:05.262 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:47:05.369 -06:00 [INF] Loaded layout settings for VehiclesForm
2025-04-21 18:47:09.741 -06:00 [INF] Welcome form initialized
2025-04-21 18:47:09.741 -06:00 [INF] Auto refresh timer started with interval 300000ms
2025-04-21 18:47:09.779 -06:00 [INF] Loaded layout settings for Welcome
2025-04-21 18:47:09.779 -06:00 [INF] Loading today's trips data
2025-04-21 18:47:09.785 -06:00 [INF] No scheduled trips found for today
2025-04-21 18:47:09.789 -06:00 [INF] Loading today's trips data
2025-04-21 18:47:09.793 -06:00 [INF] No scheduled trips found for today
2025-04-21 18:47:11.196 -06:00 [INF] Fuel button clicked
2025-04-21 18:47:11.196 -06:00 [INF] Navigating to Fuel Records
2025-04-21 18:47:11.197 -06:00 [INF] Applying initialization script from C:\Users\steve.mckitrick\Desktop\BusBuddy\bin\Debug\net9.0-windows\init-db.sql...
2025-04-21 18:47:11.202 -06:00 [INF] Vehicles table already exists. Checking schema...
2025-04-21 18:47:11.318 -06:00 [WRN] Minor error running init script on existing DB (might be expected).
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
duplicate column name: PlateNumber
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass6_0.<InitializeDatabase>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 69
2025-04-21 18:47:11.319 -06:00 [INF] Database schema initialization/verification complete.
2025-04-21 18:47:11.323 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:47:11.329 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:47:11.330 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:47:11.342 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:47:11.342 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:47:11.407 -06:00 [INF] Loaded layout settings for FuelForm
2025-04-21 18:47:30.470 -06:00 [INF] Saved layout settings for FuelForm
2025-04-21 18:47:32.473 -06:00 [INF] Maintenance button clicked
2025-04-21 18:47:32.473 -06:00 [INF] Navigating to Maintenance Records
2025-04-21 18:47:32.474 -06:00 [INF] Applying initialization script from C:\Users\steve.mckitrick\Desktop\BusBuddy\bin\Debug\net9.0-windows\init-db.sql...
2025-04-21 18:47:32.478 -06:00 [INF] Vehicles table already exists. Checking schema...
2025-04-21 18:47:32.616 -06:00 [WRN] Minor error running init script on existing DB (might be expected).
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
duplicate column name: PlateNumber
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass6_0.<InitializeDatabase>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 69
2025-04-21 18:47:32.617 -06:00 [INF] Database schema initialization/verification complete.
2025-04-21 18:47:32.620 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:47:32.624 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:47:32.624 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:47:32.791 -06:00 [ERR] Error converting maintenance record data from database for ID 1
Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: Cannot implicitly convert type 'long' to 'int'. An explicit conversion exists (are you missing a cast?)
   at CallSite.Target(Closure, CallSite, Object)
   at System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,TRet](CallSite site, T0 arg0)
   at BusBuddy.Data.DatabaseManager.<GetMaintenanceRecords>b__15_0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 421
2025-04-21 18:47:32.793 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:47:32.793 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:47:32.842 -06:00 [INF] Loaded layout settings for MaintenanceForm
2025-04-21 18:47:37.037 -06:00 [INF] Saved layout settings for MaintenanceForm
2025-04-21 18:47:37.963 -06:00 [INF] Drivers button clicked
2025-04-21 18:47:37.964 -06:00 [INF] Navigating to Driver Management
2025-04-21 18:47:37.965 -06:00 [INF] Applying initialization script from C:\Users\steve.mckitrick\Desktop\BusBuddy\bin\Debug\net9.0-windows\init-db.sql...
2025-04-21 18:47:37.970 -06:00 [INF] Vehicles table already exists. Checking schema...
2025-04-21 18:47:38.141 -06:00 [WRN] Minor error running init script on existing DB (might be expected).
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
duplicate column name: PlateNumber
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass6_0.<InitializeDatabase>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 69
2025-04-21 18:47:38.142 -06:00 [INF] Database schema initialization/verification complete.
2025-04-21 18:47:38.149 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:47:38.156 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:47:38.336 -06:00 [INF] Loaded layout settings for DriverForm
2025-04-21 18:47:43.526 -06:00 [INF] Exit button clicked. Closing DriverForm.
2025-04-21 18:47:43.528 -06:00 [INF] Saved layout settings for DriverForm
2025-04-21 18:52:27.123 -06:00 [INF] Starting BusBuddy application
2025-04-21 18:52:27.631 -06:00 [INF] Welcome form initialized
2025-04-21 18:52:27.633 -06:00 [INF] Auto refresh timer started with interval 300000ms
2025-04-21 18:52:27.789 -06:00 [INF] Loaded layout settings for Welcome
2025-04-21 18:52:27.790 -06:00 [INF] Loading today's trips data
2025-04-21 18:52:27.906 -06:00 [INF] No scheduled trips found for today
2025-04-21 18:52:27.912 -06:00 [INF] Loading today's trips data
2025-04-21 18:52:27.917 -06:00 [INF] No scheduled trips found for today
2025-04-21 18:52:29.894 -06:00 [INF] Vehicles button clicked
2025-04-21 18:52:29.895 -06:00 [INF] Navigating to Vehicle Management
2025-04-21 18:52:29.897 -06:00 [INF] Applying initialization script from C:\Users\steve.mckitrick\Desktop\BusBuddy\bin\Debug\net9.0-windows\init-db.sql...
2025-04-21 18:52:29.902 -06:00 [INF] Vehicles table already exists. Checking schema...
2025-04-21 18:52:30.002 -06:00 [WRN] Minor error running init script on existing DB (might be expected).
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
duplicate column name: PlateNumber
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass6_0.<InitializeDatabase>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 69
2025-04-21 18:52:30.003 -06:00 [INF] Database schema initialization/verification complete.
2025-04-21 18:52:30.016 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:52:30.021 -06:00 [ERR] Required column PurchaseDate is missing in table Vehicles.
2025-04-21 18:52:30.022 -06:00 [ERR] Vehicles table schema is invalid. Returning empty list.
2025-04-21 18:52:30.026 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:52:30.027 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:52:30.125 -06:00 [INF] Loaded layout settings for VehiclesForm
2025-04-21 18:52:32.476 -06:00 [INF] Welcome form initialized
2025-04-21 18:52:32.476 -06:00 [INF] Auto refresh timer started with interval 300000ms
2025-04-21 18:52:32.516 -06:00 [INF] Loaded layout settings for Welcome
2025-04-21 18:52:32.516 -06:00 [INF] Loading today's trips data
2025-04-21 18:52:32.522 -06:00 [INF] No scheduled trips found for today
2025-04-21 18:52:32.525 -06:00 [INF] Loading today's trips data
2025-04-21 18:52:32.530 -06:00 [INF] No scheduled trips found for today
2025-04-21 18:52:33.476 -06:00 [INF] Fuel button clicked
2025-04-21 18:52:33.476 -06:00 [INF] Navigating to Fuel Records
2025-04-21 18:52:33.477 -06:00 [INF] Applying initialization script from C:\Users\steve.mckitrick\Desktop\BusBuddy\bin\Debug\net9.0-windows\init-db.sql...
2025-04-21 18:52:33.482 -06:00 [INF] Vehicles table already exists. Checking schema...
2025-04-21 18:52:33.591 -06:00 [WRN] Minor error running init script on existing DB (might be expected).
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
duplicate column name: PlateNumber
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass6_0.<InitializeDatabase>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 69
2025-04-21 18:52:33.592 -06:00 [INF] Database schema initialization/verification complete.
2025-04-21 18:52:33.596 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:52:33.603 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:52:33.603 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:52:33.615 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:52:33.616 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:52:33.674 -06:00 [INF] Loaded layout settings for FuelForm
2025-04-21 18:52:37.264 -06:00 [INF] Saved layout settings for FuelForm
2025-04-21 18:52:39.762 -06:00 [INF] Maintenance button clicked
2025-04-21 18:52:39.762 -06:00 [INF] Navigating to Maintenance Records
2025-04-21 18:52:39.763 -06:00 [INF] Applying initialization script from C:\Users\steve.mckitrick\Desktop\BusBuddy\bin\Debug\net9.0-windows\init-db.sql...
2025-04-21 18:52:39.768 -06:00 [INF] Vehicles table already exists. Checking schema...
2025-04-21 18:52:39.874 -06:00 [WRN] Minor error running init script on existing DB (might be expected).
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
duplicate column name: PlateNumber
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass6_0.<InitializeDatabase>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 69
2025-04-21 18:52:39.875 -06:00 [INF] Database schema initialization/verification complete.
2025-04-21 18:52:39.878 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:52:39.882 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:52:39.883 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:52:40.040 -06:00 [ERR] Error converting maintenance record data from database for ID 1
Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: Cannot implicitly convert type 'long' to 'int'. An explicit conversion exists (are you missing a cast?)
   at CallSite.Target(Closure, CallSite, Object)
   at System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,TRet](CallSite site, T0 arg0)
   at BusBuddy.Data.DatabaseManager.<GetMaintenanceRecords>b__15_0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 421
2025-04-21 18:52:40.043 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:52:40.043 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:52:40.093 -06:00 [INF] Loaded layout settings for MaintenanceForm
2025-04-21 18:52:43.277 -06:00 [INF] Saved layout settings for MaintenanceForm
2025-04-21 18:52:44.843 -06:00 [INF] Drivers button clicked
2025-04-21 18:52:44.844 -06:00 [INF] Navigating to Driver Management
2025-04-21 18:52:44.845 -06:00 [INF] Applying initialization script from C:\Users\steve.mckitrick\Desktop\BusBuddy\bin\Debug\net9.0-windows\init-db.sql...
2025-04-21 18:52:44.849 -06:00 [INF] Vehicles table already exists. Checking schema...
2025-04-21 18:52:45.040 -06:00 [WRN] Minor error running init script on existing DB (might be expected).
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
duplicate column name: PlateNumber
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.<>c__DisplayClass6_0.<InitializeDatabase>b__0(SQLiteConnection connection) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 69
2025-04-21 18:52:45.040 -06:00 [INF] Database schema initialization/verification complete.
2025-04-21 18:52:45.045 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:52:45.051 -06:00 [WRN] Cannot update status: Form handle not created yet. Deferring update.
2025-04-21 18:52:45.155 -06:00 [INF] Loaded layout settings for DriverForm
2025-04-21 18:52:56.723 -06:00 [INF] Exit button clicked. Closing DriverForm.
2025-04-21 18:52:56.728 -06:00 [INF] Saved layout settings for DriverForm
2025-04-21 18:52:58.293 -06:00 [INF] Exit button clicked
2025-04-21 18:52:59.947 -06:00 [INF] Exiting application
2025-04-21 18:52:59.949 -06:00 [INF] Saved layout settings for Welcome
2025-04-21 18:52:59.950 -06:00 [INF] Saved layout settings for VehiclesForm
2025-04-21 18:52:59.951 -06:00 [INF] Saved layout settings for Welcome
2025-04-21 18:52:59.992 -06:00 [INF] Saved layout settings for VehiclesForm
2025-04-21 18:54:14.107 -06:00 [INF] Starting BusBuddy application
2025-04-21 18:54:14.615 -06:00 [FTL] Application terminated unexpectedly
code = Constraint (19), message = System.Data.SQLite.SQLiteException (0x87AF202F): constraint failed
UNIQUE constraint failed: SchemaVersion.Version
   at System.Data.SQLite.SQLite3.Step(SQLiteStatement stmt)
   at System.Data.SQLite.SQLiteDataReader.Step(SQLiteStatement statement)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.ApplyPendingMigrations() in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 136
   at BusBuddy.Data.DatabaseManager.InitializeDatabase() in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 82
   at BusBuddy.Data.DatabaseManager..ctor(ILogger logger) in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 42
   at InvokeStub_DatabaseManager..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at BusBuddy.Program.Main() in C:\Users\steve.mckitrick\Desktop\BusBuddy\Program.cs:line 47
2025-04-21 18:54:19.761 -06:00 [ERR] Error during database cleanup.
code = Error (1), message = System.Data.SQLite.SQLiteException (0x87AF001F): SQL logic error
no such table: Fuel
   at System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, SQLiteCommand command, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain)
   at System.Data.SQLite.SQLiteCommand.BuildNextCommand()
   at System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery()
   at Dapper.SqlMapper.ExecuteCommand(IDbConnection cnn, CommandDefinition& command, Action`2 paramReader) in /_/Dapper/SqlMapper.cs:line 2965
   at Dapper.SqlMapper.ExecuteImpl(IDbConnection cnn, CommandDefinition& command) in /_/Dapper/SqlMapper.cs:line 656
   at Dapper.SqlMapper.Execute(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Nullable`1 commandTimeout, Nullable`1 commandType) in /_/Dapper/SqlMapper.cs:line 527
   at BusBuddy.Data.DatabaseManager.Cleanup() in C:\Users\steve.mckitrick\Desktop\BusBuddy\Data\DatabaseManager.cs:line 574
